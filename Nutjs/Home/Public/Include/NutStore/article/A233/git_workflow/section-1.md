# Git分支使用情景 #

什么时候要建立分支，什么是Git的分支驱动。本章节会举一个详细的例子来形象的说明Git分支使用的情景

## Git的分支 ##

Git鼓励使用分支来解决问题，也鼓励多次提交，所以当我们要给某个项目开发一个新功能时，可以新建一个以功能命名的分支，在功能分支上不断的进行提交，最终合并进主分支。

这样做的好处是，一旦你这个功能开发到一半，突然要开发另一个功能，那么利用Git，你可以直接切换到主分支，再新建一个功能分支。2个功能分支互不干预，当完成功能时都会合并进主分支。

## Git分支应用举例 ##

举个例子：我们要开发协会网站的坚果商店功能。

首先我先要将源码clone到本地，然后在最新的一次提交上建立一个名字叫做“shop”的功能分支，用来开发商店功能。

那么，克隆下来分支可能是这个样子的

    * 7c2bb87 - (HEAD -> master)增加开发文档说明
    |
    * eff7c11 - 整理目录结构
    |
    * 1c70c4b - 完成了会员登录功能
    |
    * e5e896b - 创建项目

那么在默认的HEAD位置，新建了一个新分支，名字叫做shop，那么结构就应该是这样：

    * 7c2bb87 - (HEAD -> master, shop)增加开发文档说明
    |
    * eff7c11 - 整理目录结构
    |
    * 1c70c4b - 完成了会员登录功能
    |
    * e5e896b - 创建项目

完成了商店首页后，你进行了一次提交

    * 870b6a8 - (HEAD -> shop)完成了商店首页
    |
    * 7c2bb87 - (master)增加开发文档说明
    |
    * eff7c11 - 整理目录结构
    |
    * 1c70c4b - 完成了会员登录功能
    |
    * e5e896b - 创建项目

由于这个商店功能是你自己单独开发的，没有必要让别人看到你的工作进度，或者是你完成了商店首页部分改动了某些项目核心配置，如果提交进Master分支上会干扰其他人的进度，所以你没有提交。

但是第二天工作之前，你惯例的将master分支从远程拉下来时，你发现有一位开发团队的成员完成了用户修改密码的功能，已经将他提交到服务器了。那么，当你从远程服务器把master分支拉下来的时候，你的本地分支变成了这样

      * 870b6a8 - (HEAD -> shop) 完成了商店首页
      |
    * / cba5826 - (master) 完成了修改密码部分
    |/
    * 7c2bb87 - 增加开发文档说明
    |
    * eff7c11 - 整理目录结构
    |
    * 1c70c4b - 完成了会员登录功能
    |
    * e5e896b - 创建项目

这时候，项目负责人给你打了个电话，让你赶快把用户修改资料功能完成，网站马上就要上线了。

OK，那么你又切换到了master分支上，建立了一个change_inf分支

      * 870b6a8 - (shop) 完成了商店首页
      |
    * / cba5826 - (HEAD -> master ,change_inf) 完成了修改密码部分
    |/
    * 7c2bb87 - 增加开发文档说明
    |
    * eff7c11 - 整理目录结构
    |
    * 1c70c4b - 完成了会员登录功能
    |
    * e5e896b - 创建项目

然后不断的在change_inf分支上提交工作。

        * 4b8ad32 - (HEAD -> change_inf) 修正Bug
        |
        * bd1a340 - 写完了用户修改资料的后台
        |
        * c7d31a2 - 写完了用户修改资料的页面
        |
      * / 870b6a8 - (shop) 完成了商店首页
      |/
     /|
    * / cba5826 - (master) 完成了修改密码部分
    |/
    * 7c2bb87 - 增加开发文档说明
    |
    * eff7c11 - 整理目录结构
    |
    * 1c70c4b - 完成了会员登录功能
    |
    * e5e896b - 创建项目

完成工作后将它合并到主分支


    * 66ba358 - (master) 完成了用户修改资料功能
    |\
    | \
    |  \
    |   * 4b8ad32 - (change_inf) 修正Bug
    |   |
    |   * bd1a340 - 写完了用户修改资料的后台
    |   |
    |   * c7d31a2 - 写完了用户修改资料的页面
    |   |
    | * / 870b6a8 - (shop) 完成了商店首页
    | |/
    |/|
    * / cba5826 - 完成了修改密码部分
    |/
    * 7c2bb87 - 增加开发文档说明
    |
    * eff7c11 - 整理目录结构
    |
    * 1c70c4b - 完成了会员登录功能
    |
    * e5e896b - 创建项目

完成工作后，你可以继续切换到shop分支继续开发商店功能。


## 总结 ##

所以说Git是分支驱动的。

每当有一个新需求时，就建立一个分支去解决他，这个需求可能是一个新功能，也可能是一个Bug的修复，也可能是其他的什么东西。当项目十分庞大需要多个人协作是，一个功能分支上可能再去细分很多个功能分支。